package com.zvirja.mypcremoteshutdown;

import android.app.Activity;
import android.os.Bundle;
import android.util.Xml;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;

import java.io.UnsupportedEncodingException;
import java.nio.ByteBuffer;
import java.nio.ByteOrder;


public class MainActivity extends Activity {

    private static final int COMMAND_SLEEP = 0x112211ab;
    private static final int COMMAND_HIBERNATE = 0x348712ab;



    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }


    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        // Handle action bar item clicks here. The action bar will
        // automatically handle clicks on the Home/Up button, so long
        // as you specify a parent activity in AndroidManifest.xml.
        int id = item.getItemId();
        if (id == R.id.action_settings) {
            return true;
        }
        return super.onOptionsItemSelected(item);
    }

    public void onActionPerform(View v)
    {
        int PORT =19191;
        int MagicShutdownBeginning = 0x7b77ab88;

        int actionCode = 0;

        int controlId = v.getId();

        if(controlId == R.id.sleepBtn)
        {
            actionCode = COMMAND_SLEEP;
        } else if(controlId == R.id.hibernateBtn)
        {
            actionCode = COMMAND_HIBERNATE;
        }


        ByteBuffer buffer = ByteBuffer.allocate(8);
        buffer.order(ByteOrder.LITTLE_ENDIAN);
        buffer.putInt(MagicShutdownBeginning);
        buffer.putInt(4,actionCode);

        byte[] data = buffer.array();

    new ShutdownSender(this, (android.widget.TextView) this.findViewById(R.id.resultMsg)).execute(new SendInfo(data,PORT));
}

    public void onUnlockPerform(View v) throws UnsupportedEncodingException {
        int PORT = 22066;

        byte[] bytes = {-34,23,-32,85,22,17,-43,39,64,-101,-19,68,71,95,45,-35,-23,-84,45,-34,80,-40,-105,-3,-62,67,-84,53,74,-56,-38,-44,12,11,-28,-25,105,-98,-25,-6,21,119,80,54,-68,-11,95,-95,-77,-4,35,114,57,-119,-115,-62,65,-118,-18,49,67,119,18,92,-126,-34,-99,13,-77,68,-88,12,104,73,52,-70,-105,-72,26,-83,-96,80,42,22,31,103,1,-60,115,-56,-98,-128,-77,108,-36,-5,38,-79,29,4,98,82,-73,-84,77,62,58,18,64,58,-8,110,45,3,38,-52,86,-6,-89,88,3,48,-88,9,-35,81,30,-96,41,109,61,24,33,21,-43,-112,-25,-108,-76,62,93,102,-91,-38,-115,82,120,-23,124,16,-66,104,-73,28,-64,-50,4,-59,41,-40,98,-62,-51,-81,-127,-33,82,89,51,-68,20,-98,78,-97,85,-2,-56,28,80,48,35,51,-8,91,-61,-20,27,38,40,-36,54,-69,41,18,117,63,-35,-11,-116,-18,65,-75,-54,97,-101,41,87,49,-124,-98,44,61,-18,-9,-18,-20,38,74,84,-10,-60,4,-31,120,-60,-114,91,-3,-29,21,71,-108,67,73,87,-118,-61,32,-107,124,-42,19,55,-42,-6,-9,86,114,28,48,-93,117,-76,-2,84,34,-112,28,-78,54,-105,89,-41,-80,6,-81,73,66,-80,12,78,32,-15,-115,9,-122,-63,10,-89,-115,57,-65,-35,81,72,-57,-88,38,-79,-27,-34,-127,39,94,-4,58,2,-82,40,-25,-127,-21,-125,109,-94,-35,-87,93,-2,-51,7,-57,90,76,-120,53,-117,93,-102,-105,69,-16,38,8,54,-52,-96,85,97,38,124,-12,-51,-10,-84,114,126,21,24,55,100,74,-15,38,1,-19,27,-9,-40,80,100,6,86,-35,-120,-18,-1,122,97,20,98,107,8,118,-11,-119,52,69,-35,99,-97,-65,-119,98,-24,-69,1,39,-2,101,-40,-32,-51,-75,-125,27,-73,-75,119,-68,-83,-64,-99,92,108,-103,-84,18,122,-36,-5,0,48,35,53,-93,96,-80,45,36,-39,117,-121,-78,-116,35,-33,-97,-36,-112,-54,126,86,-31,-21,55,-99,-113,113,-10,-57,85,-18,-62,-61,-122,-27,-86,36,29,103,47,55,-17,107,95,-26,73,-116,15,-109,82,63,-24,77,59,-74,117,-54,32,-127,-119,-128,84,30,49,-96,22,101,6,-29,-14,36,-106,-48,121,74,62,-84,46,13,121,-41,32,-104,116,-113,-62,-24,111,-21,18,75,61,61,119,-17,21,-5,3,-12,-49,59,-56,18,8,78,-59,4,-71,38,-111,-118,101,-72,101,-86,96,33,-26,92,5,-39,-106,17,-120,-36,4,27,23,-94,-2,-53,-88,-18,126,81,-10,-11,-15,61,49,104,-45,11,35,32,-82,14,-42,-44,77,-35,-84,-106,-112,22,-85,120,-22,105,12,4,66,-116,38,-97,31,-85,81,112,-47,-22,101,-126,8,-34,-78,37,44,93,46,-18,-127,14,125,29,-4,-127,7,54,-117,63,-65,-82,87,-95,37,-99,34,90,40,-66,26,-10,-37,-105,85,107,-65,-101,-107,63,76,-45,-4,21,-22,-121,112,-68,-24,63,-58,88,-95,59,-13,-4,43,61,118,-86,42,-80,23,18,124,-41,-117,-89,-20,-69,31,112,-96,84,48,114,-55,-68,-40,21,115,62,82,-86,26,104,7,-27,-94,-49,-3,28,124,-103,51,2,-109,-81,-11,80,77,-30,-11,119,31,-54,121,18,35,-127,-45,25,107,43,89,-87,-100,69,50,30,-48,122,66,80,-44,-3,-108,-119,-7,-46,-128,91,-20,-83,-4,-123,72,69,-56,3,-123,-52,100,-100,-31,-74,15,19,110,47,-65,7,125,0,64,47,72,-31,63,36,30,-95,121,13,94,-47,90,-58,45,9,-94,57,99,-107,-10,96,-98,127,83,92,-108,43,105,-48,19,99,-101,20,-123,-20,-97,-42,-4,77,71,-95,24,125,99,69,92,16,35,-102,-93,1,1,-17,-126,1,-86,-118,107,73,-27,-72,55,-65,59,34,30,-72,31,39,-49,26,98,84,-124,122,38,-22,27,82,-63,76,32,53,15,-19,24,-23,-17,-63,7,-66,28,-71,103,21,-85,55,-40,65,9,42,74,-88,44,-54,-5,-126,44,13,-38,91,-84,38,94,-28,-70,-108,-73,-121,43,113,-10,-13,113,-102,-3,-1,-83,126,102,-118,-81,-91,34,76,-33,52,62,-19,-74,78,-68,6,-89,-126,41,-123,124,-14,-79,-33,-104,18,-14,-68,125,-49,54,74,-118,18,61,74,9,88,113,-80,29,83,-39,43,-116,83,-48,-121,118,16,-14,-46,-50,124,10,1,102,-57,59,54,9,46,-50,72,63,109,-7,31,-18,-10,118,-95,115,58,-67,2,-47,15,83,31,127,-107,94,88,-70,-9,99,104,106,121,-83,-21,-55,112,-89,-87,66,-50,3,-34,54,-48,15,-52,0,19,24,62,99,-4,47,-114,49,-75,-34,75,-19,-103,118,-107,-89,-45,-43,-38,-7,-109,-42,25,-48,-118,40,119,105,-113,47,-17,-29,-46,6,0,-112,110,4,-78,12,-46,81,-85,51,-49,-31,121,49,47,-40,-52,-73,62,-46,116,122,-47,-123,40,118,88,-115,95,-93};


        new ShutdownSender(this, (android.widget.TextView) this.findViewById(R.id.resultMsg)).execute(new SendInfo(bytes,PORT));
    }

}
